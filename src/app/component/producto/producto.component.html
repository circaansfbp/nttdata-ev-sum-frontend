<div class="container mt-4">
  <div class="card">
    <div class="card-header">
      <h3 class="card-title">{{ title }}</h3>

      <div class="text-start">
        <a type="button" class="btn btn-primary" routerLink="/productos/form"
          >Agregar producto</a
        >
      </div>
    </div>

    <div class="card-body">
      <!-- Filtrar por palabra clave -->
      <div class="row mb-4">
        <div class="col-6 form-group">
          <label form="nombre">Filtrar por nombre:</label>
          <input
            type="text"
            [(ngModel)]="nombre"
            name="nombre"
            class="form-control"
          />
        </div>

        <!-- Filtrar por categoría -->
        <div class="col-6">
          <label form="categoria">Filtrar por categoría:</label>
          <select class="form-select" [(ngModel)]="categoria" name="categoria">
            <option *ngFor="let cat of categorias" value="{{ cat }}">
              {{ cat }}
            </option>
          </select>
        </div>
      </div>

      <div class="row justify-content-center">
        <div
          class="card col-4 my-4 mx-4"
          *ngFor="
            let producto of productos
              | filter: categoria
              | filter: nombre
              | paginate: { itemsPerPage: 2, currentPage: p }
          "
        >
          <div class="card-title text-center p-4">
            <img
              [src]="producto.img != '' ? producto.img : '../../../assets/img/not-found.png'"
              alt="Imagen del producto. Shampoo Pantene Pro-V"
              srcset=""
            />
          </div>

          <div class="card-body">
            <div class="row text-center mb-3">
              <strong>{{ producto.nombre }}</strong>
            </div>

            <div class="row">
              <div class="col-2 text-end">
                <i class="fas fa-check"></i>
              </div>

              <div class="col-10 text-start">
                <p>{{ producto.categoria }}</p>
              </div>
            </div>

            <div class="row">
              <div class="col-2 text-end">
                <i class="fas fa-check"></i>
              </div>

              <div class="col-10 text-start text-justify">
                <p>{{ producto.descripcion }}</p>
              </div>
            </div>

            <div class="row justify-content-center my-3 border-top pt-3">
              <div class="col-6">
                <form>
                  <div class="form-group">
                    <input
                      ngModel
                      #cantidad="ngModel"
                      type="number"
                      class="form-control"
                      id="cantidadP"
                      name="cantidad"
                      required
                      min="1"
                      [(ngModel)]="producto.cant"
                    />
                  </div>
                </form>
              </div>

              <div class="col-4">
                <button
                  [disabled]="cantidad.invalid"
                  id="agregar"
                  type="submit"
                  role="button"
                  class="btn btn-primary me-2"
                  (click)="addToCarrito(producto)"
                >
                  Agregar
                </button>
              </div>
            </div>

            <div class="container text-center border-top pt-3">
              <button
                type="button"
                role="button"
                class="btn btn-warning me-1"
                [routerLink]="['/productos/editar/', producto.id]"
              >
                Editar
              </button>

              <button
                type="button"
                role="button"
                class="btn btn-danger ms-1"
                (click)="deleteProducto(producto.id)"
              >
                Eliminar
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- <div class="table-responsive">
        <table class="table table-bordered table-striped">
          <thead class="table-dark">
            <tr>
              <th>ID</th>
              <th>Nombre</th>
              <th>Precio</th>
              <th>Categoría</th>
              <th>Descripción</th>
              <th>Compra</th>
              <th>Acciones</th>
            </tr>
          </thead>

          <tbody>
            <tr
              *ngFor="
                let producto of productos
                  | filter: categoria
                  | filter: nombre
                  | paginate: { itemsPerPage: 2, currentPage: p }
              "
            >
              <td>{{ producto.id }}</td>
              <td>{{ producto.nombre }}</td>
              <td>{{ producto.precio }}</td>
              <td>{{ producto.categoria }}</td>
              <td>{{ producto.descripcion }}</td>
              <td>
                <form>
                  <div class="form-group">
                    <input
                      ngModel
                      #cantidad="ngModel"
                      type="number"
                      class="form-control"
                      id="cantidadP"
                      name="cantidad"
                      required
                      min="1"
                      [(ngModel)]="producto.cant"
                    />
                  </div>
                </form>

                <button
                  [disabled]="cantidad.invalid"
                  id="agregar"
                  type="submit"
                  role="button"
                  class="btn btn-primary me-2"
                  (click)="addToCarrito(producto)"
                >
                  Agregar
                </button>
              </td>
              <td>
                <button
                  type="button"
                  role="button"
                  class="btn btn-warning me-2"
                  [routerLink]="['/productos/editar/', producto.id]"
                >
                  Editar
                </button>
                <button
                  type="button"
                  role="button"
                  class="btn btn-danger ms-2"
                  (click)="deleteProducto(producto.id)"
                >
                  Eliminar
                </button>
              </td>
            </tr>
          </tbody>
        </table>

      </div> -->

      <div class="card-footer pt-4">
        <pagination-controls
          class="text-center"
          (pageChange)="p = $event"
        ></pagination-controls>
      </div>
    </div>
  </div>
</div>
